<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitch API Test</title>
    <script>
        function fetchTwitchStreams() {
            fetch("https://cors-anywhere.herokuapp.com/https://api.twitch.tv/helix/streams?game_id=509658&language=ru", {
                headers: {
                    "Client-ID": "b8gm3ocj4zuniuakjlbb3yhje7v98q",
                    "Authorization": "Bearer hqdqjbl7ongdzbylz33zo2zx5np99r"
                }
            })
            .then(response => response.json())
            .then(data => {
                console.log(data);
                let output = document.getElementById("output");
                output.innerHTML = ""; // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
                
                if (data.data.length === 0) {
                    output.innerText = "–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã—Ö —Å—Ç—Ä–∏–º–æ–≤.";
                } else {
                    data.data.forEach(stream => {
                        let streamElement = document.createElement("p");
                        streamElement.innerHTML = `<strong>${stream.user_name}</strong> ‚Äì ${stream.title} <br> üî¥ <a href="https://twitch.tv/${stream.user_name}" target="_blank">–°–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä–∏–º</a>`;
                        output.appendChild(streamElement);
                    });
                }
            })
            .catch(error => {
                console.error("–û—à–∏–±–∫–∞:", error);
                document.getElementById("output").innerText = "–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ Twitch API. –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–∫—Å–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.";
            });
        }
    </script>
</head>
<body>
    <h1>–¢–µ—Å—Ç Twitch API</h1>
    <button onclick="fetchTwitchStreams()">–ó–∞–ø—Ä–æ—Å–∏—Ç—å —Å—Ç—Ä–∏–º—ã</button>
    <div id="output">–ó–¥–µ—Å—å –±—É–¥—É—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã...</div>
</body>
</html>
